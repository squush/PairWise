<div class="p-1 col-12 col-sm-6 col-md-4 col-lg-3">
  <div class="card matchup border-secondary <%= matchup.done ? 'matchup-done' : '' %>">
    <p class="text-center border-bottom border-secondary text-primary py-1">
      Round <%= matchup.round_number %>
    </p>

    <div class="mb-1">
      <div class="mb-1 d-flex align-items-center gap-2" id="matchup-player">
        <%= render 'matchup_player', matchup: matchup, player: matchup.player1 %>
      </div>
      <div class="mb-2 d-flex align-items-center gap-2">
        <%= render 'matchup_player', matchup: matchup, player: matchup.player2 %>
      </div>
    </div>

    <div class="d-flex justify-content-around pb-1">
    <% if user_signed_in? %>
        <% if tournament.user == current_user || matchup.has_crosstables_id?(current_user.crosstables_id) %>
          <% if tournament.user == current_user || matchup.done == false %>
            <div class="d-flex justify-content-around gap-2" data-controller="matchups">
              <div>
                <a class="btn btn-sm btn-outline-primary" id="score-modal-btn"
                data-action="click->matchups#showForm">
                  <%= matchup.done ? "Edit score" : "Set score" %>
                </a>
              </div>

              <div class="modal" data-matchups-target="modal">
                <div class="score-modal-content">
                  <div class="d-flex justify-content-right">
                    <button class="close-btn d-flex justify-content-center align-items-center"
                      data-action="click->matchups#closeForm">&times;</button>
                    </div>
                  <div class="d-flex justify-content-center">
                    <%= render "input_score", matchup: matchup %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>

          <% unless matchup.done || tournament.user != current_user %>
            <%# <%= link_to "Edit pairing", "#", class: "btn btn-sm btn-outline-danger" %>
            <div class="d-flex justify-content-around gap-2" data-controller="edit-matchups">
              <div>
                <a class="btn btn-sm btn-outline-danger" id="edit-modal-btn"
                data-action="click->edit-matchups#showForm">
                  <%= "Edit pairing" %>
                </a>
              </div>

              <div class="modal" data-edit-matchups-target="modal">
                <div class="edit-modal-content">
                  <div class="d-flex justify-content-right">
                    <button class="close-btn d-flex justify-content-center align-items-center"
                      data-action="click->edit-matchups#closeForm">&times;</button>
                  </div>
                  <div class="d-flex justify-content-center">
                    <%= render "edit_matchup", matchup: matchup %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
